### php的cgi实现
PHP的CGI实现本质是是以socket编程实现一个TCP或UDP协议的服务器，当启动时，创建TCP/UDP协议的服务器的socket监听， 并接收相关请求进行处理。这只是请求的处理，在此基础上添加模块初始化，sapi初始化，模块关闭，sapi关闭等就构成了整个CGI的生命周期。
以TCP为例，在TCP的服务端，一般会执行这样几个操作步骤
> 1. 调用socket函数创建一个TCP用的流式套接字；
> 2. 调用bind函数将服务器的本地地址与前面创建的套接字绑定
> 3. 调用listen函数将新创建的套接字作为监听，等待客户端发起的连接，当客户端有多个连接连接到这个套接字时，可能需要排队处理
> 4. 服务器进程调用accept函数进入阻塞状态，直到有客户进程调用connect函数而建立起一个连接；
> 5. 当与客户端创建连接后，服务器调用read_stream函数读取客户的请求
> 6. 处理完数据后，服务器调用write函数向客户端发送应答
